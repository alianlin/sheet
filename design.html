<!DOCTYPE html>
<html lang="en">

<head>
     <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-WGWNDDQ');</script>
    <!-- End Google Tag Manager -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, shrink-to-fit=no">
    <title>ALian | Portfolio - APP</title>
    <meta name="keywords" content="Portfolio,ALian Lin,ALian,A-Lian,林阿蓮,阿蓮,UI,Designer,Web Designer" />
    <meta name="description" content="ALian Lin is a UI Designer,with 10 years of experience in design, digital, and marketing." />
    <meta property="og:title" content="ALian Lin | Portfolio" />
    <meta property="og:description" content="ALian Lin is a UI Designer,with 10 years of experience in design, digital, and marketing." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://alian-design.com" />
    <meta property="og:image" content="https://alian-design.com/images/share.jpg" />
    <meta property="og:image:url" content="https://alian-design.com/images/share.jpg" />
    <link rel="icon" href="https://alian-design.com/ALian/images/favicon.ico" type="image/x-icon" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.css" />
    <link rel="stylesheet" href="css/grid.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.3.2/lazysizes.min.js"></script>
    <script type="text/javascript">var _jf = _jf || [];_jf.push(['p','64282']);_jf.push(['initAction',true]);_jf.push(['_setFont','sourcehansans-tc-extralight','css','.sourcehansans-tc-extralight']);_jf.push(['_setFont','sourcehansans-tc-extralight','alias','sourcehansans-tc']);_jf.push(['_setFont','sourcehansans-tc-extralight','weight',100]);_jf.push(['_setFont','sourcehansans-tc-light','css','.sourcehansans-tc-light']);_jf.push(['_setFont','sourcehansans-tc-light','alias','sourcehansans-tc']);_jf.push(['_setFont','sourcehansans-tc-light','weight',200]);_jf.push(['_setFont','sourcehansans-tc-normal','css','.sourcehansans-tc-normal']);_jf.push(['_setFont','sourcehansans-tc-normal','alias','sourcehansans-tc']);_jf.push(['_setFont','sourcehansans-tc-normal','weight',300]);_jf.push(['_setFont','sourcehansans-tc-regular','css','.sourcehansans-tc-regular']);_jf.push(['_setFont','sourcehansans-tc-regular','alias','sourcehansans-tc']);_jf.push(['_setFont','sourcehansans-tc-regular','weight',400]);_jf.push(['_setFont','sourcehansans-tc-medium','css','.sourcehansans-tc-medium']);_jf.push(['_setFont','sourcehansans-tc-medium','alias','sourcehansans-tc']);_jf.push(['_setFont','sourcehansans-tc-medium','weight',600]);_jf.push(['_setFont','sourcehansans-sc-medium','css','.sourcehansans-sc-medium']);_jf.push(['_setFont','sourcehansans-sc-medium','alias','sourcehansans-sc']);_jf.push(['_setFont','sourcehansans-sc-medium','weight',600]);_jf.push(['_setFont','jf-jinxuan-medium','css','.jf-jinxuan-medium']);_jf.push(['_setFont','jf-jinxuan-medium','alias','jf-jinxuan']);_jf.push(['_setFont','jf-jinxuan-medium','weight',500]);_jf.push(['_setFont','jf-jinxuan-ultralight','css','.jf-jinxuan-ultralight']);_jf.push(['_setFont','jf-jinxuan-ultralight','alias','jf-jinxuan']);_jf.push(['_setFont','jf-jinxuan-ultralight','weight',100]);_jf.push(['_setFont','jf-jinxuan-light','css','.jf-jinxuan-light']);_jf.push(['_setFont','jf-jinxuan-light','alias','jf-jinxuan']);_jf.push(['_setFont','jf-jinxuan-light','weight',200]);_jf.push(['_setFont','jf-jinxuan-book','css','.jf-jinxuan-book']);_jf.push(['_setFont','jf-jinxuan-book','alias','jf-jinxuan']);_jf.push(['_setFont','jf-jinxuan-book','weight',300]);_jf.push(['_setFont','jf-jinxuan-regular','css','.jf-jinxuan-regular']);_jf.push(['_setFont','jf-jinxuan-regular','alias','jf-jinxuan']);_jf.push(['_setFont','jf-jinxuan-regular','weight',400]);_jf.push(['_setFont','jf-jinxuan-semibold','css','.jf-jinxuan-semibold']);_jf.push(['_setFont','jf-jinxuan-semibold','alias','jf-jinxuan']);_jf.push(['_setFont','jf-jinxuan-semibold','weight',600]);(function(A,p,c,m,l,q,r,h,B,D){var b=A._jf;if(b.constructor!==Object){var t=!0,u=function(a){var f=!0,e;for(e in b)b[e][0]==a&&(f&&(f=f&&!1!==b[e][1].call(b)),b[e]=null,delete b[e])},v=/\S+/g,w=/[\t\r\n\f]/g,C=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,n="".trim,x=n&&!n.call("\ufeff\u00a0")?function(a){return null==a?"":n.call(a)}:function(a){return null==a?"":(a+"").replace(C,"")},k=function(a){var f,b,g;if("string"===typeof a&&a&&(a=(a||"").match(v)||[],f=h[c]?(" "+h[c]+" ").replace(w," "):" ")){for(g=0;b=a[g++];)0>f.indexOf(" "+b+" ")&&(f+=b+" ");h[c]=x(f)}},d=function(a){var b,e,g;if(0===arguments.length||"string"===typeof a&&a){var d=(a||"").match(v)||[];if(b=h[c]?(" "+h[c]+" ").replace(w," "):""){for(g=0;e=d[g++];)for(;0<=b.indexOf(" "+e+" ");)b=b.replace(" "+e+" "," ");h[c]=a?x(b):""}}},y;b.addScript=y=function(b,f,e,g,d,c){d=d||function(){};c=c||function(){};var a=p.createElement("script"),h=p.getElementsByTagName("script")[0],k,m=!1,l=function(){a.src="";a.parentNode.removeChild(a);a=a.onerror=a.onload=a.onreadystatechange=null};g&&(k=setTimeout(function(){l();c()},g));a.type=f||"text/javascript";a.async=e;a.onload=a.onreadystatechange=function(b,c){m||a.readyState&&!/loaded|complete/.test(a.readyState)||(m=!0,g&&clearTimeout(k),l(),c||d())};a.onerror=function(a,b,d){g&&clearTimeout(k);l();c();return!0};a.src=b;h.parentNode.insertBefore(a,h)};for(var z in b)"initAction"==b[z][0]&&(t=b[z][1]);b.push(["_eventPreload",function(){1==t&&k(m);y(B,null,!1,3E3,null,function(){u("_eventInactived")})}]);b.push(["_eventReload",function(){d(r);d(q);k(l)}]);b.push(["_eventActived",function(){d(m);d(l);k(q)}]);b.push(["_eventInactived",function(){d(m);d(l);k(r)}]);u("_eventPreload")}})(this,this.document,"className","jf-loading","jf-reloading","jf-active","jf-inactive",this.document.getElementsByTagName("html")[0],"//ds.justfont.com/js/stable/v/6.1/id/167579527609");</script>
</head>
<body class="page" id="design">
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-WGWNDDQ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <header class="header" id="header">
    </header>
    <div class="section_kv kv_page  kv_design">
       <div class="container">
            <h1 class="title">
                <p>Design</p>
            </h1>
       </div>
        <div class="kv_bg">
            <div class="bg_circle"></div>
            <div class="bg_circle"></div>
            <div class="bg_circle"></div>
            <div class="bg_circle"></div>
            <div class="bg_circle"></div>
            <div class="bg_circle"></div>
            <div class="bg_circle"></div>
            <div class="bg_lin" ></div>
            <div class="bg_lin" ></div>
            <div class="bg_lin"></div>
        </div>
    </div>
    <section class="section_page design_page">
        <div class="container container_tab">
            <div class="row">
              <a v-for="tab in categories"
                :key="tab"
                href="javascript:void(0);"
                :class="['btn_tab', { 'is-active': currentCategory === tab }]"
                @click="changeTab(tab)">
                <span>{{ tab }}</span>
                </a>
            </div>
        </div>
        <div class="container container_design">
            <!-- 搜尋 -->
            <div class="search_area">
                <select class="label_input label_select label_year" v-model="selectedYear">
                    <option value="">選擇年份</option> <!-- 預設選項，value 為空字串 -->
                    <option v-for="year in availableYears" :key="year" :value="year">
                    {{ year }}
                    </option>
                </select>
                <span class="line"></span>
                <input class="label_input"
                    type="text"
                    v-model="searchInput"
                    @keyup.enter="doSearch"
                    placeholder="" >
                <button class="label_btn btn" @click="doSearch">Search</button>
            </div>
            <div class="row row_content" v-for="item in pagedProjects" :key="item.id">
                <div class="col-12 col-md-55">
                    <div class="item item_pic" data-aos="fade">
                        <img :src="`images/${path}/pic_${item.id}.jpg`" :alt="item.title" />
                    </div>
                </div>
                <div class="col-12 col-md-55" >
                    <div class="item item_info" data-aos="fade-up">
                        <h2 class="info_title" v-if="item.title.length">
                            <p>{{ item.title }}</p>
                        </h2>
                        <div class="info_tag" v-if="item.year.length">
                            <span v-if="item.category.length" class="tag">{{ item.category }}</span>
                            <span v-if="item.client.length" class="tag">{{ item.client }}</span>
                            <span v-if="item.year.length" class="tag">{{ item.year }}</span>
                        </div>
                        <h5 class="info_content">
                            <p v-html="item.description">{{ item.description }}</p>
                            <p v-if="item.responsibilities.length">
                                負責項目：{{ item.responsibilities.join('、') }}
                            </p>
                        </h5>
                        <div class="info_more">
                            <a v-if="item.link" :href="item.link" class="btn_more info_more" target="_blank" rel="noopener">
                                <span class="text">more</span>
                                <span class="circle">
                                    <img class="arrow" src="images/btn_arrow_s.svg" alt="scroll down">
                                </span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="pagination" v-if="totalPages > 1">
                <button @click="currentPage--" :disabled="currentPage === 1">上一頁</button>
                 <span>{{ currentPage }} / {{ totalPages }}</span>
                 <button @click="currentPage++" :disabled="currentPage === totalPages">下一頁</button>
            </div>
        </div>
    </section>
    <div id="footer"></div>
    <a class="btn_more btn_top" href="javascript:void(0);" data-aos="kv-fadeOut" data-aos-anchor=".kv_scroll-fadeOut">
        <span class="text">TOP</span>
        <span class="circle">
            <img class="arrow" src="images/btn_arrow_sw.svg" alt="top">
        </span>
    </a>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@8/swiper-bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script src="js/mold.js"></script>
    <script type="module">
        import { createApp, ref, computed, watch } from 'https://cdn.jsdelivr.net/npm/vue@3.2.47/dist/vue.esm-browser.prod.js';
        import { useFetchData } from './js/useFetchData.js';

        createApp({
        setup() {
            const {
            categories,
            currentCategory,
            projects,
            path
            } = useFetchData();

            const currentPage = ref(1);
            const itemsPerPage = 6;

            // 新增搜尋關鍵字狀態
            const searchInput = ref('');     // 使用者輸入內容
            const searchKeyword = ref('');   // 點擊搜尋按鈕後才會生效

            // 搜尋過濾
            const filteredProjects = computed(() => {
            const keyword = searchKeyword.value.toLowerCase();

            return projects.value.filter((item) => {
                const matchKeyword =
                !searchKeyword.value ||
                item.title.toLowerCase().includes(keyword) ||
                item.description.toLowerCase().includes(keyword) ||
                item.client.toLowerCase().includes(keyword);

                const matchYear =
                !selectedYear.value || item.year === selectedYear.value;

                return matchKeyword && matchYear;
            });
            });

            // 一律用字串
            const selectedYear = ref('');
            const availableYears = computed(() => {
            const years = projects.value
                .map((p) => String(p.year).trim())
                .filter(Boolean);
            return [...new Set(years)].sort().reverse();
            });
            

            const doSearch = () => {
                searchKeyword.value = searchInput.value;
                currentPage.value = 1;
            };

            // 分頁處理（針對搜尋後的資料）
            const pagedProjects = computed(() => {
            const start = (currentPage.value - 1) * itemsPerPage;
                return filteredProjects.value.slice(start, start + itemsPerPage);
            });

            const totalPages = computed(() => {
                return Math.ceil(filteredProjects.value.length / itemsPerPage);
            });

            // 切 tab 時回第一頁
            const changeTab = (tab) => {
                currentCategory.value = tab;
                currentPage.value = 1;
                searchInput.value = '';
                searchKeyword.value = '';
                selectedYear.value = ''; // ✅ ⬅️ 預設回到 ALL
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };

            return {
                categories,
                currentCategory,
                projects,
                path,
                currentPage,
                totalPages,
                pagedProjects,
                changeTab,
                searchInput,
                availableYears,
                selectedYear,
                doSearch,
            };
        }
        }).mount('#design');
    </script>
</body>

</html>
